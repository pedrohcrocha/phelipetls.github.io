<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>Spread bancário brasileiro: limpeza e visualização de dados · Phelipe</title> <meta name="description" content="O altíssimo spread bancário 1 brasileiro é um motivo de preocupaçãodas autoridades, já que dificulta uma economia mais guiada pelo crédito,dificultando o cre..."> <link rel="icon" href="https://phelipetls.github.io/assets/favicon.png"> <link rel="apple-touch-icon" href="https://phelipetls.github.io/assets/touch-icon.png"> <link rel="stylesheet" href="https://phelipetls.github.io/assets/core.css"> <link rel="canonical" href="https://phelipetls.github.io/spread-bancario-brasileiro-r"> <link rel="alternate" type="application/atom+xml" title="Phelipe" href="https://phelipetls.github.io/feed.xml" /> <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} }); </script> <script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML"></script> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-136684675-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-136684675-1'); </script> </head> <body> <aside class="logo"> <a href="https://phelipetls.github.io/"> <img src="https://avatars3.githubusercontent.com/u/39670535?s=460&v=4" class="logo-avatar"> </a> <span class="logo-prompt code">Back to Index</span> </aside> <div id="content"> <article> <div class="center"> <h1 class="title">Spread bancário brasileiro: limpeza e visualização de dados</h1> <time class="code">March 31, 2019 | </time> <cats> <a href="/categories/#R">R</a>, </cats> <cats> <a href="/categories/#Economia">Economia</a> </cats> </div> <p><div class = "center"><small>Tags: <cats> <a href="/tag/tidyverse">Tidyverse</a>, </cats> <cats> <a href="/tag/data-visualization">Data visualization</a> </cats> </small></div></p> <div class="divider"></div> <p>O altíssimo spread bancário <sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> brasileiro é um motivo de preocupação das autoridades, já que dificulta uma economia mais guiada pelo crédito, dificultando o crescimento etc. Como estou estudando isso para monografia, pensei em visualizar exatamente quão alto ele é. Imaginei que não seria tão difícil com a ajuda do R, e não foi mesmo. Nesse post vou falar sobre a coleta de dados, o tratamento com o tidyverse e a visualização com o ggplot2.</p> <p>Normalmente, pego séries econômicas sem sair do R e num formato já muito conveniente, com a ajuda de bibliotecas como rbcb, ipeadatar, sidrar etc. Mas, para esse caso em específico, eu tive que de fato sair procurando.</p> <p>Acabei descobrindo que o World Bank registra a série <em>Interest rate spread (lending rate minus deposit rate, %)</em> anualmente para cada país. Além disso, foi tudo disponilizado para download em um .csv.</p> <p>E, como normalmente acontece com dados “selvagens”, ele não estava num formato <em>tidy</em>, limpo, que é como gostaríamos que estivesse para facilitar as coisas quando usamos R.</p> <p>Se você não sabe, um <em>tidy dataset</em> é aquele em que cada coluna corresponde a uma variável e cada linha a uma observação.</p> <h5 id="limpando-os-dados">Limpando os dados</h5> <p>Os dados eu baixei <a href="https://data.worldbank.org/indicator/fr.inr.lndp">daqui</a> e o arquivo eu nomeei “spreads.csv”. Vamos olhar como eles estão organizados e por que teremos que limpá-los.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">

</span><span class="p">(</span><span class="n">dados</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"~/Blog/phelipetls.github.io/assets/spreads.csv"</span><span class="p">,</span><span class="w">
                   </span><span class="n">skip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 264 x 64
##    `Country Name` `Country Code` `Indicator Name` `Indicator Code` `1960`
##    &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;            &lt;chr&gt;             &lt;dbl&gt;
##  1 Aruba          ABW            Interest rate s~ FR.INR.LNDP          NA
##  2 Afghanistan    AFG            Interest rate s~ FR.INR.LNDP          NA
##  3 Angola         AGO            Interest rate s~ FR.INR.LNDP          NA
##  4 Albania        ALB            Interest rate s~ FR.INR.LNDP          NA
##  5 Andorra        AND            Interest rate s~ FR.INR.LNDP          NA
##  6 Arab World     ARB            Interest rate s~ FR.INR.LNDP          NA
##  7 United Arab E~ ARE            Interest rate s~ FR.INR.LNDP          NA
##  8 Argentina      ARG            Interest rate s~ FR.INR.LNDP          NA
##  9 Armenia        ARM            Interest rate s~ FR.INR.LNDP          NA
## 10 American Samoa ASM            Interest rate s~ FR.INR.LNDP          NA
## # ... with 254 more rows, and 59 more variables: `1961` &lt;dbl&gt;,
## #   `1962` &lt;dbl&gt;, `1963` &lt;dbl&gt;, `1964` &lt;dbl&gt;, `1965` &lt;dbl&gt;, `1966` &lt;dbl&gt;,
## #   `1967` &lt;dbl&gt;, `1968` &lt;dbl&gt;, `1969` &lt;dbl&gt;, `1970` &lt;dbl&gt;, `1971` &lt;dbl&gt;,
## #   `1972` &lt;dbl&gt;, `1973` &lt;dbl&gt;, `1974` &lt;dbl&gt;, `1975` &lt;dbl&gt;, `1976` &lt;dbl&gt;,
## #   `1977` &lt;dbl&gt;, `1978` &lt;dbl&gt;, `1979` &lt;dbl&gt;, `1980` &lt;dbl&gt;, `1981` &lt;dbl&gt;,
## #   `1982` &lt;dbl&gt;, `1983` &lt;dbl&gt;, `1984` &lt;dbl&gt;, `1985` &lt;dbl&gt;, `1986` &lt;dbl&gt;,
## #   `1987` &lt;dbl&gt;, `1988` &lt;dbl&gt;, `1989` &lt;dbl&gt;, `1990` &lt;dbl&gt;, `1991` &lt;dbl&gt;,
## #   `1992` &lt;dbl&gt;, `1993` &lt;dbl&gt;, `1994` &lt;dbl&gt;, `1995` &lt;dbl&gt;, `1996` &lt;dbl&gt;,
## #   `1997` &lt;dbl&gt;, `1998` &lt;dbl&gt;, `1999` &lt;dbl&gt;, `2000` &lt;dbl&gt;, `2001` &lt;dbl&gt;,
## #   `2002` &lt;dbl&gt;, `2003` &lt;dbl&gt;, `2004` &lt;dbl&gt;, `2005` &lt;dbl&gt;, `2006` &lt;dbl&gt;,
## #   `2007` &lt;dbl&gt;, `2008` &lt;dbl&gt;, `2009` &lt;dbl&gt;, `2010` &lt;dbl&gt;, `2011` &lt;dbl&gt;,
## #   `2012` &lt;dbl&gt;, `2013` &lt;dbl&gt;, `2014` &lt;dbl&gt;, `2015` &lt;dbl&gt;, `2016` &lt;dbl&gt;,
## #   `2017` &lt;dbl&gt;, `2018` &lt;lgl&gt;, X64 &lt;lgl&gt;
</code></pre></div></div> <p>Além de um bando de NA, veja como a informação para cada ano está organizada. A cada coluna temos um ano, e abaixo o spread para cada país naquele ano. Pode até ser mais fácil visualizar os dados assim, mas não trabalhar com eles no R. O que devemos observar é que todas essas colunas são na verdade instâncias de uma única variável, o ano, e os valores também, o spread. Queremos, então, condensar toda essa massa de dados em duas colunas, transformar desse formato largo (<em>wide</em>) para um formato comprido (<em>long</em>).</p> <p>Isso é uma tarefa muito fácil para função <code class="highlighter-rouge">tidyr::gather</code>. O que ela faz é reunir um monte de colunas em uma coluna só. O primeiro argumento da função pede o nome da variável das colunas, o segundo, o nome da variável dos valores, e o terceiro, quais são as colunas que você quer reunir.</p> <p>Mas, perceba também como os nomes estão sujos. O R não gosta de espaços etc. nos nomes das colunas, então teremos que cuidar disso também. Isso é muito fácil de fazer com a função <code class="highlighter-rouge">janitor::clean_names()</code>.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">janitor</span><span class="p">)</span><span class="w">

</span><span class="p">(</span><span class="n">dados</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dados</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">clean_names</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">select</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="m">64</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">gather</span><span class="p">(</span><span class="s2">"ano"</span><span class="p">,</span><span class="w"> </span><span class="s2">"spread"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="m">1960</span><span class="o">:</span><span class="n">x</span><span class="m">2018</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">ano</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_remove</span><span class="p">(</span><span class="n">ano</span><span class="p">,</span><span class="w"> </span><span class="s2">"x"</span><span class="p">),</span><span class="w">
         </span><span class="n">ano</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">ano</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">select</span><span class="p">(</span><span class="o">-</span><span class="n">starts_with</span><span class="p">(</span><span class="s2">"indicator"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">na.omit</span><span class="p">())</span><span class="w">
</span></code></pre></div></div> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 5,225 x 4
##    country_name   country_code   ano spread
##    &lt;chr&gt;          &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
##  1 Japan          JPN           1960  3.87
##  2 Japan          JPN           1961  3.92
##  3 Japan          JPN           1962  4.21
##  4 Japan          JPN           1963  3.79
##  5 Japan          JPN           1964  3.90
##  6 Japan          JPN           1965  3.80
##  7 France         FRA           1966  0.350
##  8 Japan          JPN           1966  3.48
##  9 France         FRA           1967  0.350
## 10 United Kingdom GBR           1967  1.29
## # ... with 5,215 more rows
</code></pre></div></div> <p>Aconteceram algumas coisas aqui: primeiro, o <code class="highlighter-rouge">readr::read_csv</code> criou uma nova coluna “x64”, que não me interessa então a tirei (a função dá um warning, mas eu o omiti aqui). Daí que o clean_names prefixou um “x” às colunas com números, que também removi com <code class="highlighter-rouge">stringr::str_remove()</code>. Eu também não vou precisar das colunas com informações sobre o indicador. E, pronto, está limpo.</p> <h5 id="visualização">Visualização</h5> <p>Vamos primeiro ver como evoluiu o spread no Brasil no decorrer do tempo.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dados</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">country_name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Brazil"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">ano</span><span class="p">,</span><span class="w"> </span><span class="n">spread</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_line</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"\nAno"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Spread\n"</span><span class="p">,</span><span class="w">
       </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Spread no Brasil ao ano\n"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p><img src="../images/unnamed-chunk-7-1.png" alt="img3" /></p> <p>Veja como o spread vinha caindo sistematicamente, embora ainda fosse muito alto pros padrões internacionais. Com a crise, ele voltou a aumentar, voltando aos níveis do início do século.</p> <p>Para visualizações entre países, seria interessante filtrar a base antes, por exemplo, como se compara o spread do Brasil com o de outros países da América do Sul? Para isso, vou usar <a href="https://raw.githubusercontent.com/lukes/ISO-3166-Countries-with-Regional-Codes/master/all/all.csv">essa</a> base de dados, porque nela encontro o código de cada país, o nome de sua “região” e se ele é desenvolvido ou não.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span><span class="w">    </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"https://pkgstore.datahub.io/core/country-codes/country-codes_csv/data/3b9fd39bdadd7edd7f7dcee708f47e1b/country-codes_csv.csv"</span><span class="w">

</span><span class="n">paises</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
          </span><span class="n">clean_names</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
          </span><span class="n">select</span><span class="p">(</span><span class="n">iso3166_1_alpha_3</span><span class="p">,</span><span class="w">
                 </span><span class="n">intermediate_region_name</span><span class="p">,</span><span class="w">
                 </span><span class="n">developed_developing_countries</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
          </span><span class="n">setNames</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"codigo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"regiao"</span><span class="p">,</span><span class="w"> </span><span class="s2">"status_desenvolvimento"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   `ISO4217-currency_minor_unit` = col_number(),
##   M49 = col_double(),
##   GAUL = col_number(),
##   `Geoname ID` = col_double(),
##   `Global Code` = col_logical(),
##   `Intermediate Region Code` = col_double(),
##   `Region Code` = col_double(),
##   `Sub-region Code` = col_double()
## )

## See spec(...) for full column specifications.
</code></pre></div></div> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paises</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">glimpse</span><span class="w">
</span></code></pre></div></div> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Observations: 250
## Variables: 3
## $ codigo                 &lt;chr&gt; "TWN", "AFG", "ALB", "DZA", "ASM", "AND...
## $ regiao                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, "Middle Africa"...
## $ status_desenvolvimento &lt;chr&gt; NA, "Developing", "Developed", "Develop...
</code></pre></div></div> <p>Vamos obter um vetor com o código dos países da América do Sul, para assim podermos filtrar a base do spread.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">america_sul</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paises</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">regiao</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"South America"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">pull</span><span class="p">(</span><span class="n">codigo</span><span class="p">)</span><span class="w">

</span><span class="n">america_sul</span><span class="w">
</span></code></pre></div></div> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>##  [1] "ARG" "BOL" "BVT" "BRA" "CHL" "COL" "ECU" "FLK" "GUF" "GUY" "PRY"
## [12] "PER" "SGS" "SUR" "URY" "VEN"
</code></pre></div></div> <p>E com isso podemos fazer uma visualização dos spreads na América do Sul, para os anos de 2015 a 2017, por exemplo. No que podemos ver que o Brasil domina em termos de spread, para nossa infelicidade:</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">theme_set</span><span class="p">(</span><span class="n">theme_minimal</span><span class="p">())</span><span class="w">

</span><span class="n">anos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2015</span><span class="o">:</span><span class="m">2017</span><span class="w">

</span><span class="n">dados</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">country_code</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">america_sul</span><span class="p">,</span><span class="w">
         </span><span class="n">ano</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">anos</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">country_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_reorder</span><span class="p">(</span><span class="n">country_name</span><span class="p">,</span><span class="w"> </span><span class="n">spread</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">country_name</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spread</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_col</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Spread"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">facet_wrap</span><span class="p">(</span><span class="n">.</span><span class="o">~</span><span class="n">ano</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_flip</span><span class="p">()</span><span class="w">
</span></code></pre></div></div> <p><img src="../images/output_9_0.png" alt="img1" /></p> <p>E que tal contrastar os 15 maiores spreads de países em desenvolvimento versus desenvolvidos, pro ano de 2017? Na outra tabela tem uma coluna que pode nos ajudar com isso. Para isso, fiz um join para depois filtrar e criar os gráficos que eu queria.</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="w">    </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">left_join</span><span class="p">(</span><span class="n">dados</span><span class="p">,</span><span class="w"> </span><span class="n">paises</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">country_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"codigo"</span><span class="p">))</span><span class="w">

</span><span class="n">plot1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
         </span><span class="n">filter</span><span class="p">(</span><span class="n">ano</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2017</span><span class="p">,</span><span class="w"> </span><span class="n">status_desenvolvimento</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Developing"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
         </span><span class="n">top_n</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">spread</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
         </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">reorder</span><span class="p">(</span><span class="n">country_name</span><span class="p">,</span><span class="w"> </span><span class="n">spread</span><span class="p">),</span><span class="w"> </span><span class="n">spread</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
         </span><span class="n">geom_col</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
         </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Em desenvolvimento"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
         </span><span class="n">coord_flip</span><span class="p">()</span><span class="w">

</span><span class="n">plot2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
         </span><span class="n">filter</span><span class="p">(</span><span class="n">ano</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2017</span><span class="p">,</span><span class="w"> </span><span class="n">status_desenvolvimento</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Developed"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
         </span><span class="n">top_n</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">spread</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
         </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">reorder</span><span class="p">(</span><span class="n">country_name</span><span class="p">,</span><span class="w"> </span><span class="n">spread</span><span class="p">),</span><span class="w"> </span><span class="n">spread</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
         </span><span class="n">geom_col</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
         </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Desenvolvidos"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
         </span><span class="n">expand_limits</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">45</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
         </span><span class="n">coord_flip</span><span class="p">()</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">gridExtra</span><span class="p">)</span><span class="w">
</span><span class="n">grid.arrange</span><span class="p">(</span><span class="n">plot1</span><span class="p">,</span><span class="w"> </span><span class="n">plot2</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p><img src="../images/output_11_0.png" alt="img2" /></p> <p>Vemos, assim, que a situação do Brasil é meio crítica quando se olha para o mercado de crédito. Está no meio de países muito pequenos ou pobres (não que o Brasil também não seja) no lado subdesenvolvido. Enquanto que no lado dos desenvolvidos, está em peso o Leste Europeu etc., antigos países soviéticos.</p> <p>Não é tão claro, ao menos para mim, o porquê disso, é justamente o meu intuito entender. Se, por um lado, alguns culpam a concentração bancária, que no Brasil não é desprezível mesmo, por outro ela não nessariamente significa que o mercado não é competitivo, sendo também um fator a considerar os ganhos de eficiência que isso pode significar, com o advento das economias de escala. Normalmente se fala com razão do alto nível da Selic (ou de sua volatilidade), que implica um custo de oportunidade para investimentos (e um risco para os bancos, que eventualmente têm de recorrer ao mercado interbancário quando há descompassos entre demandas por empréstimos e ofertas de depósitos), hoje já se questiona isto, visto que a Selic está estável há meses e em níveis historicamente baixos. Outra razão pode ser a inadimplência, que realmente é considerável e da qual os bancos se protegem via spread. Ou mesmo o cumpulsório, as instituições, os impostos etc.</p> <p>Enfim, é um assunto bastante extenso, que para mim ainda é um tanto quanto nebuloso. O plano é analisar os seus determinantes quantitativamente, a partir da estimação de um modelo, provavelmente um de vetores autorregressivos.</p> <p>aos depositantes.</p> <div class="footnotes"> <ol> <li id="fn:1"> <p>É a diferença entre o que banco cobra ao emprestar e o que ele paga <a href="#fnref:1" class="reversefootnote">&#8617;</a></p> </li> </ol> </div> </article> <div class="page-navigation code"> <a class="next" href="https://phelipetls.github.io/homicidios-em-baltimore-minerando-dados-r" title="NEXT: Extraindo dados de texto com RegEx no R">&lt;&lt;</a> <span> &middot; </span> <a class="home" href="https://phelipetls.github.io/" title="Back to Index">Index</a> <span> &middot; </span> <a class="prev" href="https://phelipetls.github.io/metodo-de-newton" title="PREV: Método de Newton">&gt;&gt;</a> </div> <div class="center"> <b></b> <style> #share-buttons {display: inline-block; vertical-align: middle; } #share-buttons:after {content: ""; display: block; clear: both;} #share-buttons > div { position: relative; text-align: left; height: 36px; width: 32px; float: left; text-align: center; } #share-buttons > div > svg {height: 16px; fill: #d5d5d5; margin-top: 10px;} #share-buttons > div:hover {cursor: pointer;} #share-buttons > div.facebook:hover > svg {fill: #3B5998;} #share-buttons > div.twitter:hover > svg {fill: #55ACEE;} #share-buttons > div.linkedin:hover > svg {fill: #0077b5;} #share-buttons > div.pinterest:hover > svg {fill: #CB2027;} #share-buttons > div.gplus:hover > svg {fill: #dd4b39;} #share-buttons > div.mail:hover > svg {fill: #7D7D7D;} #share-buttons > div.instagram:hover > svg {fill: #C73B92;} #share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;} #share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;} #share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;} #share-buttons > div.pinterest > svg {height: 20px; margin-top: 9px;} #share-buttons > div.gplus > svg {height: 17px; margin-top: 9px; position: relative; left: 1px;} #share-buttons > div.mail > svg {height: 14px; margin-top: 11px;} </style> <span style="color: silver;"><br></br>Compartilhe: </span><div id="share-buttons"> <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=https://phelipetls.github.io/spread-bancario-brasileiro-r');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div> <div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=https://phelipetls.github.io/spread-bancario-brasileiro-r');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div> <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=https://phelipetls.github.io/spread-bancario-brasileiro-r&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div> <div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=https://phelipetls.github.io/spread-bancario-brasileiro-r');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div> <div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=https://phelipetls.github.io/spread-bancario-brasileiro-r');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div> </div> </div> <div class="disqus_layout"> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://phelipetls.github.io/spread-bancario-brasileiro-r'; this.page.identifier = '/spread-bancario-brasileiro-r'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//phelipetls-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> <div class="footer"> <a href="https://github.com/phelipetls"><i class="fa fa-github"></i></a> <a style="padding-left:10px;", href="https://linkedin.com/in/phelipeteles"><i class="fa fa-linkedin"></i></a> <a style="padding-left:10px;", href="mailto:phelipe_teles@hotmail.com"><i class="fa fa-envelope"></i></a> <p> <span class="block">&copy; 2019 Phelipe Teles</span> <span class="block"><small>&lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/heiswayi/the-plain">The Plain theme</a>.</small></span> </p> </div> </body> </html>
